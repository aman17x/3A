{% extends "base.html" %}
{% block content %}

<section class="gallery-header search-header">
    {% if query %}
        <h2>Search Results for "<span class="search-term">{{ query }}</span>"</h2>
        <p>Found {{ posts|length }} result{{ posts|length != 1 and 's' or '' }}.</p>
    {% else %}
        <h2>Search Results</h2>
        <p>Please enter a search term.</p>
    {% endif %}
</section>

{% if posts %}
<div class="gallery-grid">
    {% for post in posts %}
    <div class="art-card" data-post-id="{{ post.id }}">

        <!-- Artwork image -->
        <a href="{{ url_for('art_detail', post_id=post.id) }}" class="image-wrap">
            <img src="{{ post.image_url }}" alt="{{ post.title }}">
        </a>

        <div class="art-details">
            <h3 class="art-title">
                <a href="{{ url_for('art_detail', post_id=post.id) }}" class="art-title-link">
                    {{ post.title }}
                </a>
            </h3>

            <p class="art-caption">{{ post.caption }}</p>

            <!-- Author + date -->
            <span class="art-meta">
                by 
                <a href="{{ url_for('user_profile', user_id=post.user.id) }}" class="user-link">
                    {{ post.user.username }}
                </a>
                â€¢ {{ post.created_at.strftime('%b %d, %Y') }}
            </span>
        </div>

        {% if current_user and (current_user.is_admin or current_user.id == post.user_id) %}
            <button class="delete-btn" data-post-id="{{ post.id }}" title="Delete">&times;</button>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <h3>No results found</h3>
    <p>Try searching with a different keyword.</p>
    <a href="{{ url_for('gallery') }}" class="btn-primary">Back to Gallery</a>
</div>
{% endif %}

{% endblock %}
